#!/bin/bash

# === Banner === #
banner () {
  clear
  echo "    ____  _                  "
  echo "   / __ \(_)___  ____ ___  __"
  echo "  / /_/ / / __ \/ __ \`/ / / /";
  echo " / ____/ / / / / /_/ / /_/ /    (by iWas <3)"
  echo "/_/   /_/_/ /_/\__, /\__,_/  "
  echo "              /____/         "
  echo "---------------------------------------------"
}
banner

# === Ctrl + C === #
ctrl_c () {
  echo -e "\n[-] Process cancelled by user. Exiting...\n"
  tput cnorm; exit 1
}
trap ctrl_c INT

# === Hiding cursor === #
tput civis

sleep 2

# === Sudo privileges === #
echo "[!] Checking if current session has sudo privileges..."
sudo pwd > /dev/null 2>&1
echo -e "[+] Sudo privileges obtained! Thank you <3\n"

sleep 2

# === 1. GRUB Configuration === #
echo "[?] Are you using LUKS encryption?"
select option in "YES" "NO"; do
  case $option in
    YES ) LUKS=true; break;;
    NO ) LUKS=false; break;;
  esac
done

sleep 2

echo "[*] Showing disks and partitions..."
echo "-----------------------------------"
lsblk -np --output NAME,MOUNTPOINT
echo "-----------------------------------"

if [ "$LUKS" = true ]; then
  read -p "Encrypted ROOT partition"
  ROOT_UUID=
  HOME_UUID=
fi

sleep 2

# === 2. Official Packages Installation === #
for pkg in $(cat ./assets/pkgs/official_pkgs); do
  sleep 1
  echo "[*] Installing official package '$pkg'..."
  # pacman -S --noconfirm $pkg
  clear
done
banner

sleep 2

# === 3. AUR Packages Installation === #
for pkg in $(cat ./assets/pkgs/aur_pkgs); do
  sleep 1
  echo "[*] Installing AUR package '$pkg'..."
  # yay -S --noconfirm --answerdiff=None $pkg
  clear
done
banner

# === 3. From Source Programs Installation === #
# === 5. ZSH Configuration === #
# === 6. Xorg Configuration === #
# === 7. LightDM Configuration === #
# === 8. Qtile Configuration === #
